{"version":3,"sources":["uni-app:///main.js","webpack:///D:/uniapps/apply_sys/pages/admin/user/addUser.vue?0771","webpack:///D:/uniapps/apply_sys/pages/admin/user/addUser.vue?1123","webpack:///D:/uniapps/apply_sys/pages/admin/user/addUser.vue?7388","webpack:///D:/uniapps/apply_sys/pages/admin/user/addUser.vue?4f2a","uni-app:///pages/admin/user/addUser.vue"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,sG;AACAA,UAAU,CAACC,gBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAoH;AACpH;AAC2D;AACL;;;AAGtD;AACsK;AACtK,gBAAgB,6KAAU;AAC1B,EAAE,6EAAM;AACR,EAAE,kFAAM;AACR,EAAE,2FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,sFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAmnB,CAAgB,inBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC8CvoB;AACA,MADA,kBACA;AACA;;AAEA,iBAFA;;AAIA,wBAJA;;AAMA,kBANA;;AAQA,cARA;;AAUA,kBAVA;;AAYA,oBAZA;;AAcA,YAdA;;AAgBA,oBAhBA;;AAkBA,eAlBA;;AAoBA,eApBA;;AAsBA,eAtBA;;AAwBA,GA1BA;;AA4BA,QA5BA,oBA4BA;;AAEA;;AAEA;AACA,GAjCA;;AAmCA;;AAEA,aAFA,uBAEA;;AAEA;AACA,kDADA;;AAGA,sBAHA;;AAKA;;AAEA,iEAFA,EALA;;;AAUA;;AAEA;;AAEA;;AAEA;;AAEA,SAlBA;;;AAqBA,KAzBA;;AA2BA,aA3BA,uBA2BA;;AAEA;AACA,kDADA;;AAGA,sBAHA;;AAKA;;AAEA,iEAFA,EALA;;;AAUA;;AAEA;;AAEA;;AAEA,SAhBA;;;AAmBA,KAhDA;;AAkDA,gBAlDA,wBAkDA,CAlDA,EAkDA;;AAEA;;;AAGA;AACA,KAxDA;;AA0DA,aA1DA,qBA0DA,CA1DA,EA0DA;;AAEA;;AAEA,KA9DA;;AAgEA,eAhEA,uBAgEA,CAhEA,EAgEA;;AAEA;;AAEA;;AAEA,KAtEA;;AAwEA,WAxEA,qBAwEA;;AAEA;;AAEA;;AAEA;AACA,OAHA,MAGA;;AAEA;AACA;;AAEA,KApFA;;AAsFA,cAtFA,wBAsFA;;AAEA;;AAEA;AACA,iCADA;;AAGA,OALA,MAKA;;AAEA;;AAEA;AACA,yDADA;;AAGA,wBAHA;;AAKA,oCALA;;AAOA;;AAEA,mEAFA,EAPA;;;AAYA;;;AAGA;;AAEA;;AAEA,uCAFA;;;;AAMA;;AAEA,WAzBA;;AA2BA;;;;;;AAMA,KAlIA;;AAoIA,YApIA,sBAoIA;;AAEA;;AAEA;AACA,mCADA;;;AAIA;AACA;;AAEA;;AAEA;AACA,iCADA;;;AAIA;AACA;;AAEA;;AAEA;;AAEA,2BAFA;;AAIA,iCAJA;;AAMA,6BANA;;AAQA,6BARA;;AAUA,2BAVA;;AAYA,6BAZA;;;;AAgBA;AACA,8CADA;;AAGA,sBAHA;;AAKA,oCALA;;AAOA;;AAEA,iEAFA,EAPA;;;AAYA;;;AAGA;;AAEA;;AAEA;AACA,6BADA;;AAGA,qBAHA,qBAGA;;AAEA;AACA,6BADA;;AAGA,eARA;;;AAWA;;AAEA,SAhCA;;;AAmCA,KA7MA,EAnCA,E","file":"pages/admin/user/addUser.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/admin/user/addUser.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./addUser.vue?vue&type=template&id=53b698c1&\"\nvar renderjs\nimport script from \"./addUser.vue?vue&type=script&lang=js&\"\nexport * from \"./addUser.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/admin/user/addUser.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./addUser.vue?vue&type=template&id=53b698c1&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./addUser.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./addUser.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"padding\">\n\t\t<view class=\"cu-form-group margin-top\">\r\n\t\t\t<view class=\"title\">用户名:</view>\r\n\t\t\t<input type=\"text\" v-model=\"uName\" placeholder=\"请输入用户邮箱\" @blur=\"checkUname\"></input>\r\n\t\t</view>\r\n\t\t<view class=\"cu-form-group margin-top\">\r\n\t\t\t<view class=\"title\">密码:</view>\r\n\t\t\t<input type=\"text\" v-model=\"password\" placeholder=\"请输入密码\"></input>\r\n\t\t</view>\r\n\t\t<view class=\"cu-form-group margin-top\">\r\n\t\t\t<view class=\"title\">姓名:</view>\r\n\t\t\t<input type=\"text\" v-model=\"chName\" placeholder=\"请输入中文名\"></input>\r\n\t\t</view>\r\n\t\t<view  class=\"cu-form-group margin-top\">\r\n\t\t\t<view class=\"title\">所在部门</view>\r\n\t\t\t<picker @change=\"PickerChange\" :value=\"index\" :range-key=\"'dname'\" :range=\"deptList\">\r\n\t\t\t\t<view class=\"picker\">\r\n\t\t\t\t\t{{ deptList[index].dname }}\r\n\t\t\t\t</view>\r\n\t\t\t</picker>\r\n\t\t</view>\r\n\t\t<view  class=\"cu-form-group margin-top\">\r\n\t\t\t<view class=\"title\">职位</view>\r\n\t\t\t<picker @change=\"jobChange\" :value=\"idx\" :range-key=\"'roleName'\" :range=\"roleList\">\r\n\t\t\t\t<view class=\"picker\">\r\n\t\t\t\t\t{{ roleList[idx].roleName }}\r\n\t\t\t\t</view>\r\n\t\t\t</picker>\r\n\t\t</view>\r\n\t\t<radio-group  class=\"block margin-bottom\" @change=\"RadioChange\">\r\n\t\t\t\r\n\t\t\t<view class=\"cu-form-group margin-top\">\t\r\n\t\t\t\t<view class=\"title\">总部人员:</view>\r\n\t\t\t\t<radio :class=\"radio != -1?'checked':''\"   value=\"0\" />\r\n\t\t\t\t<label class=\"radio\" style=\"position: relative;left: -30upx;\">否</label>\r\n\t\t\t\t<radio :class=\"radio != -1?'checked':''\"   value=\"1\" />\r\n\t\t\t\t<label class=\"radio\" style=\"position: relative;left: -30upx;\">是</label>\r\n\t\t\t</view>\t\t\t\t\t\r\n\t\t</radio-group>\r\n\t\t\r\n\t\t<button type=\"primary\" @click=\"saveUser\">添加用户</button>\n\t</view>\n</template>\n\n<script>\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\t\r\n\t\t\t\tuName:null,\r\n\t\t\t\t\r\n\t\t\t\tpassword:\"123456\",\r\n\t\t\t\t\r\n\t\t\t\tchName:null,\r\n\t\t\t\t\r\n\t\t\t\tindex:0,\r\n\t\t\t\t\r\n\t\t\t\tdeptId:null,\r\n\t\t\t\t\r\n\t\t\t\tdeptList:null,\r\n\t\t\t\t\r\n\t\t\t\tidx:0,\r\n\t\t\t\t\r\n\t\t\t\troleList:null,\r\n\t\t\t\t\r\n\t\t\t\troles:[],\r\n\t\t\t\t\r\n\t\t\t\tradio:-1,\r\n\t\t\t\t\r\n\t\t\t\tstatus:0\n\t\t\t}\n\t\t},\r\n\t\t\r\n\t\tonLoad(){\r\n\t\t\t\r\n\t\t\tthis.loadDepts();\r\n\t\t\t\r\n\t\t\tthis.loadRoles();\r\n\t\t},\r\n\t\t\n\t\tmethods: {\r\n\t\t\t\r\n\t\t\tloadRoles(){\r\n\t\t\t\t\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl:this.$serverUrl + '/role/getRoleList',\r\n\t\t\t\t\t\r\n\t\t\t\t\tmethod:\"POST\",\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\theader:{\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\taccessToken:uni.getStorageSync('userInfo').accessToken\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\r\n\t\t\t\t\tsuccess:(rs) => {\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconsole.log(rs);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.roleList = rs.data.data;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.roleList.unshift({roleId:-1,roleName:\"请选择职位\"});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tloadDepts(){\r\n\t\t\t\t\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl:this.$serverUrl + '/dept/getDeptList',\r\n\t\t\t\t\t\r\n\t\t\t\t\tmethod:\"POST\",\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\theader:{\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\taccessToken:uni.getStorageSync('userInfo').accessToken\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\r\n\t\t\t\t\tsuccess:(rs) => {\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.deptList = rs.data.data;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.deptList.unshift({did:-1,dname:\"请选择部门\"});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t},\n\t\t\t\r\n\t\t\tPickerChange(e){\r\n\t\t\t\t\r\n\t\t\t\tthis.index = e.detail.value;\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tthis.deptId = this.deptList[this.index].did;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tjobChange(e){\r\n\t\t\t\t\r\n\t\t\t\tthis.idx = e.detail.value;\t\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tRadioChange(e){\r\n\t\t\t\t\r\n\t\t\t\tthis.radio = e.detail.value;\r\n\t\t\t\t\r\n\t\t\t\tthis.status = this.radio;\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tisEmail(){\r\n\t\t\t\t\r\n\t\t\t\tlet reg = /^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$/;\r\n\t\t\t\t\r\n\t\t\t\tif(!reg.test(this.uName)){\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}else{\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tcheckUname(){\r\n\t\t\t\t\r\n\t\t\t\tif(!this.isEmail()){\r\n\t\t\t\t\t\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\tcontent:\"用户名必须是盛邦工作邮箱\"\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet data = {\"uname\":this.uName}\r\n\t\t\t\t\t\r\n\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\turl:this.$serverUrl + '/user/checkUserIsExist',\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tmethod:\"POST\",\t\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tdata:JSON.stringify(data),\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\theader:{\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\taccessToken:uni.getStorageSync('userInfo').accessToken\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tsuccess:(rs) => {\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif(rs.data.data){\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tcontent:\"用户名已经存在，请更换!\"\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tsaveUser(){\r\n\t\t\t\t\r\n\t\t\t\tif(this.password == null || this.chName == null || this.index == 0 || this.idx == 0 || this.radio == -1){\r\n\t\t\t\t\t\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\tcontent:\"请填写所有用户信息，缺一不可\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(!this.isEmail()){\r\n\t\t\t\t\t\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\tcontent:\"用户名必须是盛邦工作邮箱\",\t\t\t\t\t\t\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.roles.push(this.roleList[this.idx]);\r\n\t\t\t\t\r\n\t\t\t\tlet params = {\r\n\t\t\t\t\t\r\n\t\t\t\t\t\"uname\":this.uName,\r\n\t\t\t\t\t\r\n\t\t\t\t\t\"password\":this.password,\r\n\t\t\t\t\t\r\n\t\t\t\t\t\"chName\":this.chName,\r\n\t\t\t\t\t\r\n\t\t\t\t\t\"deptId\":this.deptId,\r\n\t\t\t\t\t\r\n\t\t\t\t\t\"roles\":this.roles,\r\n\t\t\t\t\t\r\n\t\t\t\t\t\"status\":this.status\r\n\t\t\t\t\t\r\n\t\t\t\t}\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl:this.$serverUrl + '/user/addUser',\r\n\t\t\t\t\t\r\n\t\t\t\t\tmethod:\"POST\",\t\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\tdata:JSON.stringify(params),\r\n\t\t\t\t\t\r\n\t\t\t\t\theader:{\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\taccessToken:uni.getStorageSync('userInfo').accessToken\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\r\n\t\t\t\t\tsuccess:(rs) => {\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconsole.log(rs);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(rs.data.data){\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\tcontent:\"添加成功\",\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tsuccess() {\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t\t\turl:\"user\"\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\n\t\t}\n\t}\n</script>\n\n<style>\n\n</style>\n"],"sourceRoot":""}