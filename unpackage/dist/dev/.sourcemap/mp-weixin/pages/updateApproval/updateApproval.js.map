{"version":3,"sources":["uni-app:///main.js","webpack:///D:/uniapps/apply_sys/pages/updateApproval/updateApproval.vue?f9d5","webpack:///D:/uniapps/apply_sys/pages/updateApproval/updateApproval.vue?70cb","webpack:///D:/uniapps/apply_sys/pages/updateApproval/updateApproval.vue?c8b6","webpack:///D:/uniapps/apply_sys/pages/updateApproval/updateApproval.vue?aebd","uni-app:///pages/updateApproval/updateApproval.vue","webpack:///D:/uniapps/apply_sys/pages/updateApproval/updateApproval.vue?2546","webpack:///D:/uniapps/apply_sys/pages/updateApproval/updateApproval.vue?cb9e"],"names":["createPage","Page"],"mappings":"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","file":"pages/updateApproval/updateApproval.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/updateApproval/updateApproval.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./updateApproval.vue?vue&type=template&id=08625974&\"\nvar renderjs\nimport script from \"./updateApproval.vue?vue&type=script&lang=js&\"\nexport * from \"./updateApproval.vue?vue&type=script&lang=js&\"\nimport style0 from \"./updateApproval.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/updateApproval/updateApproval.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./updateApproval.vue?vue&type=template&id=08625974&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./updateApproval.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./updateApproval.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"box\">\n\t\t<form>\r\n\t\t\t<view class=\"cu-form-group margin-top\">\r\n\t\t\t\t<view class=\"title\">报销事由:</view>\r\n\t\t\t\t<input type=\"digit\" v-model=\"approval_reason\" placeholder=\"请输入本次报销事由\" name=\"input\"></input>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"cu-form-group margin-top\">\r\n\t\t\t\t<view class=\"title\">报销金额:</view>\r\n\t\t\t\t<input type=\"digit\" v-model=\"approval_money\" placeholder=\"请输入本次报销金额\" name=\"input\"></input>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"cu-form-group align-start margin-top\">\r\n\t\t\t\t<view class=\"title\">报销备注:</view>\r\n\t\t\t\t<textarea maxlength=\"-1\" v-model=\"approval_remark\"   placeholder=\"请输入报销相关备注信息\"></textarea>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"cu-bar bg-white margin-top\">\r\n\t\t\t\t<view class=\"action\">\r\n\t\t\t\t\t报销凭证上传\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"action\">\r\n\t\t\t\t\t{{imgList.length}}/9\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"cu-form-group\">\r\n\t\t\t\t<view class=\"grid col-4 grid-square flex-sub\">\r\n\t\t\t\t\t<view class=\"bg-img\" v-for=\"(item,index) in imgList\" :key=\"index\" @click=\"ViewImage\" :data-url=\"imgList[index]\">\r\n\t\t\t\t\t <image :src=\"imgList[index]\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t<view class=\"cu-tag bg-red\" @click.stop=\"DelImg(index,$event)\" :data-index=\"index\">\r\n\t\t\t\t\t\t\t<text class='cuIcon-close'></text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"solids\" @click=\"ChooseImage\" v-if=\"imgList.length<9\">\r\n\t\t\t\t\t\t<text class='cuIcon-cameraadd'></text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"cu-form-group margin-top\">\r\n\t\t\t\t<view class=\"title\">审批人:</view>\r\n\t\t\t\t<input type=\"text\" v-model=\"leaderName\" placeholder=\"请输入审批人姓名\" name=\"input\" @input=\"searchLeader\"></input>\r\n\t\t\t</view>\t\t\t\r\n\t\t\t<view class=\"cu-list menu margin-top\" v-if=\"approval_leaders.length != 0\" >\r\n\t\t\t\t<view class=\"cu-item\" v-for=\"(leader,index) in approval_leaders\" :key='index'>\r\n\t\t\t\t\t<view class=\"content\">\t\t\t\t\t\t\r\n\t\t\t\t\t\t<text class=\"text-grey\" @click=\"addLeader(leader)\">{{ leader.chName }}--{{ leader.deptName }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"action bg-white margin-top\">\r\n\t\t\t\t<view class=\"cu-tag  bg-orange text-lg\" v-for=\"(item,index) in leaderList\" :key = \"index\">{{item.chName}}</view>\t\t\t\t\r\n\t\t\t\r\n\t\t\t\t<view v-if=\"leaderList.length\"  class=\"cu-tag  bg-gradual-red text-lg\" @click=\"clear\">重置</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"margin-top margin-bottom\">\r\n\t\t\t\t<view class=\"bg-gradual-orange padding radius text-left shadow-blur\">\r\n\t\t\t\t\t<view class=\"text-sm\">请按照审批人职级依次填写(从低到高,前两个必须是出纳，会计)，每次一个审批人</view>\t\t\t\t\t\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<button type=\"primary\" @click=\"updateApply\">更新申请</button>\r\n\t\t\t\r\n\t\t</form>\n\t</view>\n</template>\n\n<script>\r\n\t\r\n\t\r\n\t\n\texport default {\n\t\tdata() {\n\t\t\treturn {\r\n\t\t\t\tindex:0,\r\n\t\t\t\tversion:0,\r\n\t\t\t\tapproval_event_id:null,\r\n\t\t\t\tapproval_reason:null,\r\n\t\t\t\tapproval_type_id:null,\r\n\t\t\t\tapproval_user_id:null,\r\n\t\t\t\tapproval_money:null,\r\n\t\t\t\tnow_approval_id:null,\n\t\t\t\timgList: [],\r\n\t\t\t\tapproval_remark:\"\",\t\t\t\r\n\t\t\t\tleaderName:null,\r\n\t\t\t\tleader:null,\t\r\n\t\t\t\tleaderList:[],\r\n\t\t\t\tapproval_leaders:[],\r\n\t\t\t\tapproval_persons:null,\r\n\t\t\t\tapplyData:null,\r\n\t\t\t\timgs:[],\r\n\t\t\t\tseachParam:null,\r\n\t\t\t\tselectCount:1 ,//记录第几次选择审批人\r\n\t\t\t\tpreApprovalId:null,\r\n\t\t\t\timgUrls:[],\r\n\t\t\t\tnoteList:[] ,//审批凭证列表\r\n\t\t\t\tisFirstSearch:true //判断是否是第一次搜索审批人\n\t\t\t}\n\t\t},\r\n\t\tonLoad(e) {\r\n\t\t\t\r\n\t\t\t//this.approval_type_id = e.type_id\t\t\r\n\t\t\t\r\n\t\t\tthis.index = e.index;\r\n\t\t\t\r\n\t\t\tlet approvalData = uni.getStorageSync(\"approvalList\")[this.index]\r\n\t\t\t\r\n\t\t\tthis.approval_event_id = approvalData.approvalEventId;\r\n\t\t\t\r\n\t\t\tthis.approval_reason = approvalData.approvalReason;\r\n\t\t\t\r\n\t\t\tthis.approval_money = approvalData.approvalMoney;\r\n\t\t\t\r\n\t\t\tthis.approval_remark = approvalData.approvalRemark;\r\n\t\t\t\r\n\t\t\tthis.approval_type_id = approvalData.approvalTypeId;\r\n\t\t\t\r\n\t\t\tthis.version = approvalData.version;\r\n\t\t\t\r\n\t\t\tthis.imgs = approvalData.notes.map((val,index) => {\r\n\t\t\t\t\r\n\t\t\t\treturn val.approvalNoteUrl;\r\n\t\t\t\t\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\tthis.imgList =  approvalData.notes.map((val,index) => {\r\n\t\t\t\t\r\n\t\t\t\treturn this.$addUrl+val.approvalNoteUrl;\r\n\t\t\t\t\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\t// 获取审批凭证列表\r\n\t\t\t\r\n\t\t\tthis.noteList = approvalData.notes\r\n\t\t\t\r\n\t\t\tthis.leaderList = approvalData.users;\r\n\t\t\t\r\n\t\t},\r\n\t\t\t\t\r\n\t\tcomponents:{},\n\t\tmethods: {\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tChooseImage() {\r\n\t\t\t\t\r\n\t\t\t\tlet _this = this\r\n\t\t\t\t\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\t//count: 4, //默认9\r\n\t\t\t\t\tsizeType: ['original', 'compressed'], //可以指定是原图还是压缩图，默认二者都有\r\n\t\t\t\t\t//sourceType: ['album'], //从相册选择  默认二者都有\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (this.imgList.length != 0) {\r\n\t\t\t\t\t\t\tthis.imgList = this.imgList.concat(res.tempFilePaths)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.imgList = res.tempFilePaths\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.imgList.forEach(function(val,index){\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// console.log(val+'==='+index);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tuni.uploadFile({\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\turl:_this.$serverUrl + '/note/uploadImg',\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tfilePath:_this.imgList[index],\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tname:'file',\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\theader:{\r\n\t\t\t\t\t\t\t\t\t\"Content-Type\": \"multipart/form-data\",\r\n\t\t\t\t\t\t\t\t\taccessToken:uni.getStorageSync('userInfo').accessToken\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tsuccess(rs){\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t//console.log(JSON.parse(rs.data).data.approvalNoteUrl);\r\n\t\t\t\t\t\t\t\t\t_this.imgs.push(JSON.parse(rs.data).data.approvalNoteUrl)\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tfail(msg) {\r\n\t\t\t\t\t\t\t\t\tconsole.log(msg)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tDelImg(index,event) {\r\n\t\t\t\t\r\n\t\t\t\tconsole.log(index);\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '亲爱的同事',\r\n\t\t\t\t\tcontent: '确定要删除该凭证吗',\r\n\t\t\t\t\tcancelText: '取消',\r\n\t\t\t\t\tconfirmText: '确定',\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis.imgList.splice(event.currentTarget.dataset.index, 1);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis.imgs.splice(event.currentTarget.dataset.index, 1);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tlet data = {approvalNoteId:this.noteList[index].approvalNoteId};\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\t\turl:this.$serverUrl+'/note/delImg',\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tdata:JSON.stringify(data),\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\theader:{\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\taccessToken:uni.getStorageSync('userInfo').accessToken\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tmethod:\"POST\",\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tsuccess(rs) {\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tconsole.log(rs);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tif(rs.data.code == 200){\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\t\t\tcontent:\"删除成功!\"\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tViewImage(e) {\r\n\t\t\t\tuni.previewImage({\r\n\t\t\t\t\turls: this.imgList,\r\n\t\t\t\t\tcurrent: e.currentTarget.dataset.url\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 审批人\r\n\t\t\t\r\n\t\t\tsearchLeader(){\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t//要更新审批人，必须先清空\r\n\t\t\t\tif(this.isFirstSearch){\r\n\t\t\t\t\t\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\tcontent:\"确定要重置审批人吗?\",\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tsuccess:rs => {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif(rs.confirm){\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tthis.isFirstSearch = false;\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tthis.selectCount = 1;\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tthis.leaderList = [];\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tthis.seachParam = {};\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.seachParam = {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tchName:this.leaderName,\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tselectCount:this.selectCount\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(this.selectCount > 2){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.seachParam.preApprovalId = this.preApprovalId\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\turl:this.$serverUrl+'/user/getApprovalList',\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tdata:JSON.stringify(this.seachParam),\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tmethod:'POST',\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\theader:{\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\taccessToken:uni.getStorageSync('userInfo').accessToken\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tsuccess:rs => {\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t//console.log(rs)\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis.approval_leaders = rs.data.data\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t//console.log(this.approval_leaders)\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\taddLeader(item){\r\n\t\t\t\t\r\n\t\t\t\tlet flag = false;\r\n\t\t\t\t\r\n\t\t\t\t//清空搜索框搜索关键字\r\n\t\t\t\t  \r\n\t\t\t\tthis.leaderName = \"\";\r\n\t\t\t\t\r\n\t\t\t\tconsole.log(item)\r\n\t\t\t\t\r\n\t\t\t\tthis.leaderList.forEach((val,index) => {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(val.id == item.id){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tflag = true\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\tcontent:\"添加过该审批人\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\tif(!flag){\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 记录出纳和会计\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(this.selectCount < 2){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.selectCount++;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t//让selectCount不再走后台出纳和会计的逻辑\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(this.selectCount == 2) this.selectCount = 3\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 记录本次审批人id\r\n\t\t\t\t\t\tthis.preApprovalId = item.id\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.leaderList.push(item);\r\n\t\t\t\t\t\r\n\t\t\t\t}\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tclear(){\r\n\t\t\t\t\r\n\t\t\t\tlet _this = this\r\n\t\t\t\t\r\n\t\t\t\tthis.selectCount = 1\r\n\t\t\t\t\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent:\"确定要重置审批人吗?\",\r\n\t\t\t\t\t\r\n\t\t\t\t\tsuccess() {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t_this.leaderList = [];\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t_this.seachParam = {}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t})\t\t\t\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tupdateApply(){\r\n\t\t\t\t\r\n\t\t\t\tif(!this.leaderList.length){\r\n\t\t\t\t\t\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcontent:\"审批人不能为空\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 获取是否是总部人员\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet status = uni.getStorageSync('userInfo').user.status;\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 判断金额是否超过限额，需要黄总审批 \r\n\t\t\t\t\t//总部人员报销不管多少钱都找黄总审批 非总部 超过2000到黄总\t\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(status == 1 && !this.isContainHz()){\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\tcontent:\"总部人员报销,必须找黄总审批\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tif(this.approval_money >= 2000 && !this.isContainHz()){\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\tcontent:\"非总部人员报销超过2000，必须由黄总审批\"\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 把审批人数组所有ID存到arr里传给后台\r\n\t\t\t\t\tlet arr = [];\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.leaderList.forEach((val,index) => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tarr.push(val.id)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tthis.approval_persons = arr.join(',');\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 处理图片路径数组  approvalNoteUrl\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet imgs = [];\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.imgs.forEach((val,index) => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\timgs[index] = {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tapprovalNoteUrl:val\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t\tconsole.log(imgs);\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.applyData = {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\"approvalEventId\":this.approval_event_id,\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\"approvalReason\":this.approval_reason,\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t'approvalTypeId':this.approval_type_id,\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t'approvalMoney':this.approval_money,\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t'approvalRemark':this.approval_remark,\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t'approvalUserId':uni.getStorageSync('userInfo').user.id,\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t'approvalPersons':this.approval_persons,\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\"version\":this.version,\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t'notes':imgs\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tconsole.log(this.applyData)\r\n\t\t\t\t\t\r\n\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\turl:this.$serverUrl + '/event/updateApproval',\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tdata:JSON.stringify(this.applyData),\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tmethod:\"POST\",\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\theader:{\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\taccessToken:uni.getStorageSync('userInfo').accessToken\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tsuccess(rs) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif(rs.statusCode == 200){\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tcontent:\"更新成功\",\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tsuccess(rs) {\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tif(rs.confirm){\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\t\t\t\t\t\t\turl:\"../applytype/applytype\"\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 查看审批人是否包含黄总\r\n\t\t\t\r\n\t\t\tisContainHz(){\r\n\t\t\t\t\r\n\t\t\t\tlet rs = false;\r\n\t\t\t\t\r\n\t\t\t\tthis.leaderList.forEach((val,index) => {\r\n\t\t\t\t\t\r\n\t\t\t\t\t//console.log(val.status)\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(val.status == 2){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\trs = true\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\treturn rs;\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\n\t\t}\n\t}\n</script>\n\n<style>\n.cu-form-group{\r\n\t\r\n\tjustify-content: start!important;\r\n\t\r\n}\r\n\t\t\n</style>\n","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./updateApproval.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./updateApproval.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1601288932048\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}