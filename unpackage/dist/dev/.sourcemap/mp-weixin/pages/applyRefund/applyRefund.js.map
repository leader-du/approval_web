{"version":3,"sources":["uni-app:///main.js","webpack:///D:/uniapps/apply_sys/pages/applyRefund/applyRefund.vue?4a53","webpack:///D:/uniapps/apply_sys/pages/applyRefund/applyRefund.vue?9eac","webpack:///D:/uniapps/apply_sys/pages/applyRefund/applyRefund.vue?b825","webpack:///D:/uniapps/apply_sys/pages/applyRefund/applyRefund.vue?b3c9","uni-app:///pages/applyRefund/applyRefund.vue","webpack:///D:/uniapps/apply_sys/pages/applyRefund/applyRefund.vue?2982","webpack:///D:/uniapps/apply_sys/pages/applyRefund/applyRefund.vue?40a8"],"names":["createPage","Page"],"mappings":"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","file":"pages/applyRefund/applyRefund.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/applyRefund/applyRefund.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./applyRefund.vue?vue&type=template&id=4881ff94&\"\nvar renderjs\nimport script from \"./applyRefund.vue?vue&type=script&lang=js&\"\nexport * from \"./applyRefund.vue?vue&type=script&lang=js&\"\nimport style0 from \"./applyRefund.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/applyRefund/applyRefund.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./applyRefund.vue?vue&type=template&id=4881ff94&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./applyRefund.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./applyRefund.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"box\">\n\t\t<form>\r\n\t\t\t<view class=\"cu-form-group margin-top\">\r\n\t\t\t\t<view class=\"title\">报销事由:</view>\r\n\t\t\t\t<input type=\"text\" v-model=\"approval_reason\" placeholder=\"请输入本次报销事由\" name=\"input\"></input>\r\n\t\t\t</view>\r\n\t\t\t<view v-if=\"isAreaManager\" class=\"cu-form-group margin-top\">\r\n\t\t\t\t<view class=\"title\">复核总经理</view>\r\n\t\t\t\t<picker @change=\"PickerChange\" :value=\"index\" :range-key=\"'chName'\" :range=\"baseManagerList\">\r\n\t\t\t\t\t<view class=\"picker\">\r\n\t\t\t\t\t\t{{ baseManagerList[index].chName }}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</picker>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t<radio-group v-if=\"isBaseManager && baseFuManager\" class=\"block\" @change=\"RadioChange\">\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"cu-form-group margin-top\">\t\r\n\t\t\t\t\t<view class=\"title\">复核副总</view>\r\n\t\t\t\t\t<radio :class=\"radio != -1?'checked':''\"   :value=\"baseFuManager.chName\" />\r\n\t\t\t\t\t<label class=\"radio\" style=\"position: relative;left: 10upx;\">{{ baseFuManager.chName }}</label>\r\n\t\t\t\t\t\r\n\t\t\t\t</view>\t\t\t\t\t\r\n\t\t\t</radio-group>\r\n\t\t\t\r\n\t\t\t<view class=\"cu-form-group margin-top\">\r\n\t\t\t\t<view class=\"title\">报销金额:</view>\r\n\t\t\t\t<input type=\"digit\" v-model=\"approval_money\" placeholder=\"请输入本次报销金额\" name=\"input\"></input>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"cu-form-group align-start margin-top\">\r\n\t\t\t\t<view class=\"title\">报销备注:</view>\r\n\t\t\t\t<textarea maxlength=\"-1\" v-model=\"approval_remark\"   placeholder=\"请输入报销相关备注信息\"></textarea>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"cu-form-group margin-top\">\r\n\t\t\t\t<view class=\"title\">文件上传:</view>\r\n\t\t\t\t<button type=\"primary\" @click=\"fileUpload\">上传</button>\r\n\t\t\t</view>\r\n\t\t\t<view v-for=\"(file,index) in fileArr\" :key='index' class=\"cu-form-group margin-top\">\r\n\t\t\t\t<text>{{ file.filename }}</text>\r\n\t\t\t\t<button class=\"cu-btn round bg-orange\" @click=\"delFile(index)\">删除</button>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"cu-bar bg-white margin-top\">\r\n\t\t\t\t<view class=\"action\">\r\n\t\t\t\t\t报销凭证上传\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"action\">\r\n\t\t\t\t\t{{imgList.length}}/9\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"cu-form-group\">\r\n\t\t\t\t<view class=\"grid col-4 grid-square flex-sub\">\r\n\t\t\t\t\t<view class=\"bg-img\" v-for=\"(item,index) in imgList\" :key=\"index\" @click=\"ViewImage\" :data-url=\"imgList[index]\">\r\n\t\t\t\t\t <image :src=\"imgList[index]\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t<view class=\"cu-tag bg-red\" @click.stop=\"DelImg\" :data-index=\"index\">\r\n\t\t\t\t\t\t\t<text class='cuIcon-close'></text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"solids\" @click=\"ChooseImage\" v-if=\"imgList.length<9\">\r\n\t\t\t\t\t\t<text class='cuIcon-cameraadd'></text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"cu-form-group margin-top\">\r\n\t\t\t\t<view class=\"title\">审批人:</view>\r\n\t\t\t\t<input type=\"text\" v-model=\"leaderName\" placeholder=\"请输入审批人姓名\" name=\"input\" @input=\"searchLeader\"></input>\r\n\t\t\t</view>\t\t\r\n\t\t\t<view class=\"cu-list menu margin-top\" v-if=\"isShow\" >\r\n\t\t\t\t<view class=\"bg-orange padding radius text-left shadow-blur\">\r\n\t\t\t\t\t<view class=\"text-sm\">请确保前两个分别是出纳，财务，其他审批人按照职级依次搜索</view>\t\t\t\t\t\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"cu-list menu margin-top\" v-if=\"approval_leaders.length != 0\" >\r\n\t\t\t\t<view class=\"cu-item\" v-for=\"(leader,index) in approval_leaders\" :key='index'>\r\n\t\t\t\t\t<view class=\"content\">\t\t\t\t\t\t\r\n\t\t\t\t\t\t<text class=\"text-grey\" @click=\"addLeader(leader)\">{{ leader.chName }}--{{ leader.dept.dname }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"action bg-white margin-top\">\r\n\t\t\t\t<view class=\"cu-tag  bg-orange text-lg\" v-for=\"(item,index) in leaderList\" :key = \"index\">{{item.chName}}</view>\t\t\t\t\r\n\t\t\t\r\n\t\t\t\t<view v-if=\"leaderList.length\"  class=\"cu-tag  bg-gradual-red text-lg\" @click=\"clear\">重置</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- <view class=\"margin-top margin-bottom\">\r\n\t\t\t\t<view class=\"bg-gradual-orange padding radius text-left shadow-blur\">\r\n\t\t\t\t\t<view class=\"text-sm\">请按照审批人职级依次填写(从低到高,前两个必须是出纳，会计)，每次一个审批人</view>\t\t\t\t\t\r\n\t\t\t\t</view>\r\n\t\t\t</view> -->\r\n\t\t\t<button type=\"primary\" @click=\"submitApply\">提交申请</button>\r\n\t\t\t\r\n\t\t</form>\n\t</view>\n</template>\n\n<script>\r\n\t\r\n\t\r\n\t\n\texport default {\n\t\tdata() {\n\t\t\treturn {\r\n\t\t\t\tapproval_reason:null,\r\n\t\t\t\tapproval_type_id:null,\r\n\t\t\t\tapproval_user_id:null,\r\n\t\t\t\tapproval_money:null,\r\n\t\t\t\tnow_approval_id:null,\n\t\t\t\timgList: [],\r\n\t\t\t\tapproval_remark:\"\",\t\t\t\r\n\t\t\t\tleaderName:null,\r\n\t\t\t\tleader:null,\t\r\n\t\t\t\tleaderList:[],\r\n\t\t\t\tapproval_leaders:[],\r\n\t\t\t\tapproval_persons:null,\r\n\t\t\t\tapplyData:null,\r\n\t\t\t\timgs:[],\r\n\t\t\t\tseachParam:null,\r\n\t\t\t\tselectCount:1 ,//记录第几次选择审批人\r\n\t\t\t\tpreApprovalId:null,\r\n\t\t\t\tisAreaManager:false,//判断是否是基地总经理\r\n\t\t\t\tisBaseManager:false, //判断是否是基地总经理\r\n\t\t\t\tbaseManagerList:[] ,//区域包含总经理列表\r\n\t\t\t\tbaseFuManager:null, //基地副总\r\n\t\t\t\tindex:0  ,//总经理选择初始value\r\n\t\t\t\tradio:-1 ,//单选样式\r\n\t\t\t\tisSTFlag:false ,// 是否石唐区域\r\n\t\t\t\tisShow:false, //搜索审批人空的情况处理\r\n\t\t\t\tfileArr:[] ,//上传文件存储对象\r\n\t\t\t\tfileReturnArr:[] // 上传成功后返回数据存储的数组 用于存储到数据库中\n\t\t\t}\n\t\t},\r\n\t\tonLoad(e) {\r\n\t\t\t\r\n\t\t\tthis.approval_type_id = e.type_id;\r\n\t\t\t\r\n\t\t\tlet id = uni.getStorageSync('userInfo').user.roles[0].roleId;\r\n\t\t\t\t\t\r\n\t\t\tthis.isAreaManager = id == 7 ? true : false\r\n\t\t\t\r\n\t\t\tthis.isBaseManager = id == 6 ? true : false\r\n\t\t\t\r\n\t\t\t//陈文斌的曹妃甸是秦授权的一个部门，报销需要王俊杰审批\r\n\t\t\t\r\n\t\t\tif(uni.getStorageSync('userInfo').user.id == 311){\r\n\t\t\t\t\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl:this.$serverUrl + '/user/getUserByUid',\r\n\t\t\t\t\t\r\n\t\t\t\t\tmethod:\"POST\",\r\n\t\t\t\t\t\r\n\t\t\t\t\tdata:JSON.stringify({id:64}),//64王俊杰的id\r\n\t\t\t\t\t\r\n\t\t\t\t\theader:{\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\taccessToken:uni.getStorageSync('userInfo').accessToken\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\r\n\t\t\t\t\tsuccess:(rs) => {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t//添加到审批人列表\r\n\t\t\t\t\t\tthis.leaderList[0] = {\"chName\":\"预审出纳\"}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.leaderList[1] = {\"chName\":\"预审会计\"}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.leaderList[2] = rs.data;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconsole.log(rs);\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//通过用户查出负责基地的副总\r\n\t\t\t\r\n\t\t\tif(id == 6){\r\n\t\t\t\t\r\n\t\t\t\t// 如果是石唐区域 那么副总都是郝国森 \r\n\t\t\t\t\r\n\t\t\t\tthis.isSTArea().then(rs => {\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.isSTFlag = rs;\r\n\t\t\t\t\t\r\n\t\t\t\t\t// console.log(this.isSTFlag)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tif(this.isSTFlag){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t//通过郝国森的uid查询该用户\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\turl:this.$serverUrl + '/user/getUserByUid',\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tmethod:\"POST\",\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tdata:JSON.stringify({id:261}),//261郝国森的id\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\theader:{\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\taccessToken:uni.getStorageSync('userInfo').accessToken\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tsuccess:(rs) => {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tconsole.log(rs);\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif(rs.data){\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tthis.baseFuManager = rs.data;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t// 非石唐区域正常查询\r\n\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\turl:this.$serverUrl + '/user/getFuManager',\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tmethod:\"POST\",\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tdata:JSON.stringify({id:uni.getStorageSync('userInfo').user.id}),\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\theader:{\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\taccessToken:uni.getStorageSync('userInfo').accessToken\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tsuccess:(rs) => {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t//console.log(rs);\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif(rs.data){\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tthis.baseFuManager = rs.data;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// 通过用户查出所有管辖基地的总经理\r\n\t\t\t\r\n\t\t\tif(id == 7){\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl:this.$serverUrl + '/user/getBaseManager',\r\n\t\t\t\t\t\r\n\t\t\t\t\tmethod:\"POST\",\r\n\t\t\t\t\t\r\n\t\t\t\t\tdata:JSON.stringify({id:uni.getStorageSync('userInfo').user.id}),\r\n\t\t\t\t\t\r\n\t\t\t\t\theader:{\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\taccessToken:uni.getStorageSync('userInfo').accessToken\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\r\n\t\t\t\t\tsuccess:(rs) => {\r\n\t\t\t\t\t\trs.data.forEach((val,index) => {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif(!this.isContainObj(this.baseManagerList,val)){\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t this.baseManagerList.push(val)\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t//console.log(this.baseManagerList)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.baseManagerList.unshift({\"id\":-1,\"chName\":\"--请选择--\"});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\t\t\t\r\n\t\tcomponents:{},\n\t\tmethods: {\t\t\r\n\t\t\t\r\n\t\t\t// 删除上传文件\r\n\t\t\t\r\n\t\t\tdelFile(n){\r\n\t\t\t\t\r\n\t\t\t\tlet _this = this;\r\n\t\t\t\t\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\tcontent:\"确定要删除吗?\",\r\n\t\t\t\t\t\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(res.confirm){\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t_this.fileArr.splice(n,1);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t_this.fileReturnArr.splice(n,1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tfileUpload(){\r\n\t\t\t\tlet _this = this;\r\n\t\t\t\twx.chooseMessageFile({\r\n\t\t\t\t\tcount: 5,     //能选择文件的数量\r\n\t\t\t\t\t  type: 'file',   //能选择文件的类型,我这里只允许上传文件.还有视频,图片,或者都可以\r\n\t\t\t\t\t  success(res) { \r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tres.tempFiles.forEach((file,index) => {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar size = file.size;\r\n\t\t\t\t\t\t\t\tvar filename = file.name;\r\n\t\t\t\t\t\t\t\tvar newfilename = filename + \"\";  \r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tconsole.log(size)\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tconsole.log(filename)\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (size > 10485760|| !_this.fileReg(newfilename)){ //我还限制了文件的大小和具体文件类型\r\n\t\t\t\t\t\t\t\t  wx.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '文件大小不能超过10MB,格式必须为pdf/word/excel！',\r\n\t\t\t\t\t\t\t\t\ticon: \"none\",\r\n\t\t\t\t\t\t\t\t\tduration: 2000,\r\n\t\t\t\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t\t\t\t  })\r\n\t\t\t\t\t\t\t\t}else{\t\t\t\t\t\t  \r\n\t\t\t\t\t\t\t\t  \r\n\t\t\t\t\t\t\t\t  _this.fileArr.push({\r\n\t\t\t\t\t\t\t\t\t  \r\n\t\t\t\t\t\t\t\t\t  path:file.path,\r\n\t\t\t\t\t\t\t\t\t  \r\n\t\t\t\t\t\t\t\t\t  filename:filename\r\n\t\t\t\t\t\t\t\t\t  \r\n\t\t\t\t\t\t\t\t  });\r\n\t\t\t\t\t\t\t\t  \r\n\t\t\t\t\t\t\t\t  uni.uploadFile({\r\n\t\t\t\t\t\t\t\t  \t\r\n\t\t\t\t\t\t\t\t  \turl:_this.$serverUrl + '/file/uploadFile',\t\r\n\t\t\t\t\t\t\t\t  \t\r\n\t\t\t\t\t\t\t\t  \tfilePath:file.path,\r\n\t\t\t\t\t\t\t\t  \t\r\n\t\t\t\t\t\t\t\t  \tname:'file',\r\n\t\t\t\t\t\t\t\t  \t\r\n\t\t\t\t\t\t\t\t  \theader:{\r\n\t\t\t\t\t\t\t\t  \t\t\"Content-Type\": \"multipart/form-data\",\r\n\t\t\t\t\t\t\t\t  \t\taccessToken:uni.getStorageSync('userInfo').accessToken\r\n\t\t\t\t\t\t\t\t  \t\t},\r\n\t\t\t\t\t\t\t\t  \t\r\n\t\t\t\t\t\t\t\t  \tsuccess(rs){\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t  \t\t\r\n\t\t\t\t\t\t\t\t  \t\tconsole.log(rs);\r\n\t\t\t\t\t\t\t\t  \t\t// 组合上传文件存储到数据库的数据\r\n\t\t\t\t\t\t\t\t  \t\t\r\n\t\t\t\t\t\t\t\t\t\t_this.fileReturnArr.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\tapprovalFileUrl:JSON.parse(rs.data).data.approvalFileUrl\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t  \t},\r\n\t\t\t\t\t\t\t\t  \t\r\n\t\t\t\t\t\t\t\t  \tfail(msg) {\r\n\t\t\t\t\t\t\t\t  \t\t\r\n\t\t\t\t\t\t\t\t  \t\tconsole.log(msg)\r\n\t\t\t\t\t\t\t\t  \t}\r\n\t\t\t\t\t\t\t\t  })\r\n\t\t\t\t\t\t\t\t  \r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t  }\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tfileReg(filename){\r\n\t\t\t\t\r\n\t\t\t\tlet flag = false;\r\n\t\t\t\t\r\n\t\t\t\tif(filename.indexOf('.pdf') != -1){\r\n\t\t\t\t\t\r\n\t\t\t\t\tflag = true;\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(filename.indexOf('.doc') != -1){\r\n\t\t\t\t\t\r\n\t\t\t\t\tflag = true;\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(filename.indexOf('.docx') != -1){\r\n\t\t\t\t\t\r\n\t\t\t\t\tflag = true;\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(filename.indexOf('.xls') != -1){\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(filename.indexOf('.xlsx') != -1){\r\n\t\t\t\t\t\r\n\t\t\t\t\tflag = true;\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn flag;\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 判断是否属于石唐区域\r\n\t\t\t\r\n\t\t\tasync isSTArea(){\r\n\t\t\t\t\r\n\t\t\t\tlet rs = await this.getData();\r\n\t\t\t\t\r\n\t\t\t\treturn rs.aid == 5 ? true : false;\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tgetData(){\r\n\t\t\t\t\r\n\t\t\t\treturn new Promise( resole => {\r\n\t\t\t\t\t\r\n\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\turl:this.$serverUrl + '/area/getAreaByUid',\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tmethod:\"POST\",\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tdata:JSON.stringify({id:uni.getStorageSync('userInfo').user.id}),\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\theader:{\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\taccessToken:uni.getStorageSync('userInfo').accessToken\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tsuccess:(rs) => {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tresole(rs.data);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//判断数组是否包含某个对象\r\n\t\t\t\r\n\t\t\tisContainObj(arr,item){\r\n\t\t\t\t\t\r\n\t\t\t\tif(JSON.stringify(arr).indexOf(JSON.stringify(item)) == -1){\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn true;\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 选择副总\r\n\t\t\t\r\n\t\t\tRadioChange(e) {\r\n\t\t\t\tthis.radio = e.detail.value\r\n\t\t\t\t//添加到审批人列表\r\n\t\t\t\tthis.leaderList[0] = {\"chName\":\"预审出纳\"}\r\n\t\t\t\t\r\n\t\t\t\tthis.leaderList[1] = {\"chName\":\"预审会计\"}\r\n\t\t\t\t\r\n\t\t\t\tthis.leaderList[2] = this.baseFuManager\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//选择总经理\r\n\t\t\t\r\n\t\t\tPickerChange(e) {\r\n\t\t\t\t\r\n\t\t\t\t//console.log(\"总经理id====\"+e.detail.value)\r\n\t\t\t\t\r\n\t\t\t\tthis.index = e.detail.value\r\n\t\t\t\t\r\n\t\t\t\tif(this.index != 0){\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.leaderList[0] = {\"chName\":\"预审出纳\"}\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.leaderList[1] = {\"chName\":\"预审会计\"}\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.leaderList[2] = this.baseManagerList[this.index]\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tChooseImage() {\r\n\t\t\t\t\r\n\t\t\t\tlet _this = this\r\n\t\t\t\t\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\t//count: 4, //默认9\r\n\t\t\t\t\tsizeType: ['original', 'compressed'], //可以指定是原图还是压缩图，默认二者都有\r\n\t\t\t\t\tsourceType: ['album'], //从相册选择  默认二者都有\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (this.imgList.length != 0) {\r\n\t\t\t\t\t\t\tthis.imgList = this.imgList.concat(res.tempFilePaths)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.imgList = res.tempFilePaths\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.imgList.forEach(function(val,index){\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tuni.uploadFile({\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\turl:_this.$serverUrl + '/note/uploadImg',\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tfilePath:_this.imgList[index],\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tname:'file',\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\theader:{\r\n\t\t\t\t\t\t\t\t\t\"Content-Type\": \"multipart/form-data\",\r\n\t\t\t\t\t\t\t\t\taccessToken:uni.getStorageSync('userInfo').accessToken\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tsuccess(rs){\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t_this.imgs.push(JSON.parse(rs.data).data.approvalNoteUrl)\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tfail(msg) {\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tconsole.log(msg)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tDelImg(e) {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '亲爱的同事',\r\n\t\t\t\t\tcontent: '确定要删除该凭证吗',\r\n\t\t\t\t\tcancelText: '取消',\r\n\t\t\t\t\tconfirmText: '确定',\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\tthis.imgList.splice(e.currentTarget.dataset.index, 1)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tViewImage(e) {\r\n\t\t\t\tuni.previewImage({\r\n\t\t\t\t\turls: this.imgList,\r\n\t\t\t\t\tcurrent: e.currentTarget.dataset.url\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 审批人\r\n\t\t\t\r\n\t\t\tsearchLeader(){\t\t\r\n\t\t\t\t\r\n\t\t\t\tlet user = uni.getStorageSync('userInfo').user;\r\n\t\t\t\t\r\n\t\t\t\tif(user.deptId == 38){\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.selectCount = 3;\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.preApprovalId = user.id;\r\n\t\t\t\t} \r\n\t\t\t\t\r\n\t\t\t\tthis.seachParam = {\r\n\t\t\t\t\t\r\n\t\t\t\t\tchName:this.leaderName,\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\tselectCount:this.selectCount\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t}\t\t\r\n\t\t\t\t \r\n\t\t\t\t\r\n\t\t\t\tif(this.selectCount > 2){\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.seachParam.preApprovalId = this.preApprovalId\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconsole.log(this.seachParam)\r\n\t\t\t\t\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl:this.$serverUrl+'/user/getApprovalList',\r\n\t\t\t\t\t\r\n\t\t\t\t\tdata:JSON.stringify(this.seachParam),\r\n\t\t\t\t\t\r\n\t\t\t\t\tmethod:'POST',\r\n\t\t\t\t\t\r\n\t\t\t\t\theader:{\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\taccessToken:uni.getStorageSync('userInfo').accessToken\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\r\n\t\t\t\t\tsuccess:rs => {\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(rs.data.data.length){\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis.approval_leaders = rs.data.data\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis.isShow = false;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis.isShow = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\taddLeader(item){\r\n\t\t\t\t\r\n\t\t\t\tlet flag = false;\r\n\t\t\t\t\r\n\t\t\t\t//清空搜索框搜索关键字\r\n\t\t\t\t  \r\n\t\t\t\tthis.leaderName = \"\";\r\n\t\t\t\t\r\n\t\t\t\t//console.log(item)\r\n\t\t\t\t\r\n\t\t\t\tthis.leaderList.forEach((val,index) => {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(val.id == item.id){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tflag = true\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\tcontent:\"添加过该审批人\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\tif(!flag){\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 记录出纳和会计\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(this.selectCount < 2){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.selectCount++;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 总经理复核逻辑添加\r\n\t\t\t\t\t\tthis.leaderList[0] = item;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t//让selectCount不再走后台出纳和会计的逻辑\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(this.selectCount == 2) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis.selectCount = 3\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// 总经理复核逻辑添加\r\n\t\t\t\t\t\t\tthis.leaderList[1] = item;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis.leaderList.push(item);\r\n\t\t\t\t\t\t}\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 记录本次审批人id\r\n\t\t\t\t\t\tthis.preApprovalId = item.id\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t}\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tclear(){\r\n\t\t\t\t\r\n\t\t\t\tlet _this = this\r\n\t\t\t\t\r\n\t\t\t\tthis.selectCount = 1\r\n\t\t\t\t\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent:\"确定要重置审批人吗?\",\r\n\t\t\t\t\t\r\n\t\t\t\t\tsuccess() {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t_this.leaderList = [];\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t_this.seachParam = {}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t})\t\t\t\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tsubmitApply(){\r\n\t\t\t\t\r\n\t\t\t\tif(!this.leaderList.length){\r\n\t\t\t\t\t\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcontent:\"审批人不能为空\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 获取是否是总部人员\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet status = uni.getStorageSync('userInfo').user.status;\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 判断金额是否超过限额，需要黄总审批 \r\n\t\t\t\t\t//总部人员报销不管多少钱都找黄总审批 非总部 超过2000到黄总 老的需求\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t//新的需求所有报销借款最后都由黄总审批\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(!this.isContainHz()){\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\tcontent:\"最后必须由董事长审批\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// else{\r\n\t\t\t\t\t\r\n\t\t\t\t\t// \tif(this.approval_money >= 2000 && !this.isContainHz()){\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t// \t\tuni.showModal({\r\n\t\t\t\t\t// \t\t\tcontent:\"非总部人员报销超过2000，必须董事长审批\"\r\n\t\t\t\t\t// \t\t})\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t// \t\treturn;\r\n\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t// }\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 把审批人数组所有ID存到arr里传给后台\r\n\t\t\t\t\tlet arr = [];\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.leaderList.forEach((val,index) => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tarr.push(val.id)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tthis.approval_persons = arr.join(',');\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 处理图片路径数组  approvalNoteUrl\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet imgs = [];\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.imgs.forEach((val,index) => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\timgs[index] = {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tapprovalNoteUrl:val\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t\tconsole.log(imgs);\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.applyData = {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\"approvalReason\":this.approval_reason,\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t'approvalTypeId':this.approval_type_id,\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t'approvalMoney':this.approval_money,\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t'approvalRemark':this.approval_remark,\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t'approvalUserId':uni.getStorageSync('userInfo').user.id,\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t'approvalPersons':this.approval_persons,\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t'notes':imgs\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t// 组合文件上传数据\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(this.fileArr.length != 0){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 组合文件上传数据\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tlet _this = this;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.fileReturnArr.forEach((item,index) => {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\titem.approvalFileName = _this.fileArr[index].filename;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.applyData.approvalFileList = this.fileReturnArr\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\turl:this.$serverUrl + '/event/addApproval',\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tdata:JSON.stringify(this.applyData),\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tmethod:\"POST\",\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\theader:{\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\taccessToken:uni.getStorageSync('userInfo').accessToken\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tsuccess(rs) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif(rs.statusCode == 200){\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\tcontent:\"添加成功\",\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tsuccess() {\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t\t\t\turl:\"../applytype/applytype\"\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 查看审批人是否包含黄总\r\n\t\t\t\r\n\t\t\tisContainHz(){\r\n\t\t\t\t\r\n\t\t\t\tlet rs = false;\r\n\t\t\t\t\r\n\t\t\t\tthis.leaderList.forEach((val,index) => {\r\n\t\t\t\t\t\r\n\t\t\t\t\t//console.log(val.status)\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(val.status == 2){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\trs = true\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\treturn rs;\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\n\t\t}\n\t}\n</script>\n\n<style>\n.cu-form-group{\r\n\t\r\n\tjustify-content: start!important;\r\n\t\r\n}\r\n\r\n.cu-btn{\r\n\t\r\n\tmargin-left: 30upx;\r\n}\r\n\t\t\n</style>\n","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./applyRefund.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./applyRefund.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1607129193638\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}